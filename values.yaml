# Default values for enketo.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: enketo/enketo-express
  pullPolicy: IfNotPresent
  tag: 2.6.2

recreatePods: false

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext:
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1000

securityContext:
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1000

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false
  # className:
  annotations:
    {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
    # nginx.ingress.kubernetes.io/proxy-buffering: "on" - enabling or disabling proxy buffering
    # nginx.ingress.kubernetes.io/proxy-buffers-number: "4"
    # nginx.ingress.kubernetes.io/proxy-buffer-size: "32k"
  hosts:
    - host: enketo.domain.com
      paths:
        - /
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources:
  {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}
livenessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 15
  timeoutSeconds: 5
  periodSeconds: 10
  failureThreshold: 2
readinessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 15
  timeoutSeconds: 5
  periodSeconds: 10
  failureThreshold: 2

# Name of the Secret created to contain the configurations
# of the application
configSecretName: "enketo-config-secrets"

containerPort: 8005

extraSelectorLabels: {}

extraEnvVars: []
extraSecretEnvVars: [] # list of secret env vars to be added to the deployment
createExtraSecretEnvVarsSecret: false # whether to create a secret containing the secret env vars. If false, the secret must exist already
extraSecretEnvVarsSecretName: "enketo-extra-env-vars" # name of the secret containing the secret env vars

config:
    appName: "Enketo Smart Paper for Ona"
    port: 8005
    offlineEnabled: true
    linkedFormAndDataServer:
        name: "Ona"
        serverUrl: "https://onadata.rivers.onalabs.org/"
        apiKey: ""
        legacyFormhub: false
        authentication:
            managedByEnketo: false
            allowInsecureTransport: false
            externalLoginUrlThatSetsCookie: "http://onadata.rivers.onalabs.org/api/v1/forms/login.json?return={RETURNURL}"
    timeout: 300000
    encryptionKey: ""
    defaultTheme: "formhub"
    themesSupported:
        - "formhub"
        - "grid"
    basePath: ""
    log:
        submissions: false
    support:
        email: "support@example.org"
    widgets:
        - "note"
        - "select-desktop"
        - "select-mobile"
        - "autocomplete"
        - "geo"
        - "textarea"
        - "url"
        - "table"
        - "radio"
        - "date"
        - "time"
        - "datetime"
        - "select-media"
        - "file"
        - "draw"
        - "rank"
        - "likert"
        - "range"
        - "columns"
        - "image-view"
        - "comment"
        - "image-map"
        - "date-native"
        - "date-native-ios"
        - "date-mobile"
        - "text-max"
    analytics: "google"
    google:
        analytics:
            ua: ""
            domain: ""
        apiKey: ""
    piwik:
        analytics:
            trackerUrl: ""
            siteId: ""
    headless:
        timeout: 60000
    maps:
    - name: "street"
      tiles:
        - "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
      attribution: "Map data © <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors"
    - name: "satellite"
      tiles:
        - "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"
      attribution: "Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"
    - name: "terrain"
      tiles:
        - "https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png"
      attribution: "Map data © <a href='https://opentopomap.org/'>OpenStreetMap</a> contributors"
    queryParameterToPassToSubmission: ""
    redis:
        main:
            host: "redis-master.default.svc.cluster.local"
            port: "6379"
            password: null
        cache:
            host: "127.0.0.1"
            port: "6379"
            password: null
    logo:
        source: ""
        href: ""
    disableSaveAsDraft: false
    repeatOrdinals: false
    validateContinuously: false
    validatePage: true
    payloadLimit: "100kb"
    offlinePath: true
